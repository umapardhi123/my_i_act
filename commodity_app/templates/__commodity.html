<!doctype html>
<html lang="en">
  <head>
    {% load static %}
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link id="pagestyle" href="{% static 'css/argon-dashboard.css' %}" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>


    <style>
        td i{
            margin: 5px;
        }
        .score{
          border-bottom: 5px solid lightgray;
        }
        a{
            color: #F9F6EE;
        }
        .nav-link{
            color: #F9F6EE;
        }
        body{
            background-color: #f7f7f7;    
        }
    </style>

    <title>Hello, world!</title>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg" style="background-color: #4553c7;">
        <div class="container-fluid">
          <a class="navbar-brand" href="#" style="color: white;">COMMODITY trading</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <!-- <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Link</a>
              </li> -->
              <!-- <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Dropdown
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Action</a></li>
                  <li><a class="dropdown-item" href="#">Another action</a></li>
                  <li><hr class="dropdown-divider"></li>
                  <li><a class="dropdown-item" href="#">Something else here</a></li>
                </ul>
              </li> -->
              <!-- <li class="nav-item">
                <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
              </li> -->
            </ul>
            <div class="ms-md-auto pe-md-3 d-flex align-items-center">
                <div class="input-group">
                  <span class="input-group-text text-body"><i class="fas fa-search" aria-hidden="true"></i></span>
                  <input type="text" class="form-control" placeholder="Type here...">
                </div>
              </div>
          </div>
        </div>
      </nav>

        
      <div class="container-fluid" >
        <!-- <div class="row mt-3">
            <div class="col-lg-3">
                <div class="card score">
                    <div class="card-body">
                        <h5 class="text-center">Iron</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="card score">
                    <div class="card-body">
                        <h5 class="text-center">Gold</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="card score">
                    <div class="card-body">
                        <h5 class="text-center">Silver</h5>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="card score">
                    <div class="card-body">
                        <h5 class="text-center">Metal</h5>
                    </div>
                </div>
            </div>
        </div> -->

      <div class="row">
              <div class="col-md-12 grid-margin stretch-card">
                <div class="card">
                  <div class="card-body">
                    <div class="clearfix">
                      <h4 class="card-title float-left">Wallstreetzen Screener</h4>#}
                      <div id="visit-sale-chart-legend" class="rounded-legend legend-horizontal legend-top-right float-right"></div>
                    </div>
                    <div class="table-responsive">
                      <table class="table">
                        <thead>
                          <tr>
                            <th style="color: dimgray;"> Commodities <i class="px-1 bi bi-caret-down-fill"></i></th>
                            <th style="color: dimgray;"> Stock price  <i class="px-1 bi bi-caret-down-fill"></i></th>
                            <th> Predicted price <i class="px-1 bi bi-caret-down-fill"></i></th>
                            <th> Current price <i class="px-1 bi bi-caret-down-fill"></i></th>
                            <th> Percentage <i class="px-1 bi bi-caret-down-fill"></i></th>
                            <th> Variation <i class="px-1 bi bi-caret-down-fill"></i></th>
                            <th> Unit  <i class="px-1 bi bi-caret-down-fill"></i></th>
                            <th> Date  <i class="px-1 bi bi-caret-down-fill"></i></th>
                          </tr>
                        </thead>
                        <tbody>
                        {% for x in df.itertuples %}
                          <tr>
                            <td><a>{{ x.commodities }}</a></td>
                            <td>{{ x.stock_price }}</td>
                            <td>{{ x.predicted_price }} </td>
                              <td>{{ x.current_price}}
                                  <i class="fa fa-edit" data-bs-toggle="edit_row" onclick="edit_row(id='{{x.id}}')" >#}
                                 </i>
                                  <button type="button" class="btn btn-primary-sm" data-bs-toggle="modal" data-bs-target="#exampleModal{{ x.id }}">
                                demo
                                </button>
                              </td>
                            <td>{{ x.percentage }}</td>
                            <td>{{ x.variation }} </td>
                            <td>{{ x.unit }}</td>
                            <td>{{ x.date }}</td>
                          </tr>
                            <!-- Modal -->
<div class="modal fade" id="exampleModal{{ x.id }}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel{{ x.id }}">Modal title</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <form method="post">
              {% csrf_token %}
              <div class="mt-2">
                  <label for="exampleInputEmail1" class="form-label">Current price:</label>
                  <input type="text" id="price{{ x.id }}" name="price" type="text" value="{{ x.current_price }}" class="form-control" >
               <!-- <input id="price{{ x.id }}" name="price" type="text" value="{{ x.current_price }}" > -->
              </div>
              <div class="mt-2">
                  <button type="button" class="btn btn-primary" onclick="edit_row(id='{{x.id}}')">Save </button>

              </div>
          </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>

      </div>
    </div>
  </div>
</div>
                          {% endfor %}
                        </tbody>
                      </table>


                    </div>
                  </div>
                  <nav aria-label="Page navigation example " class="d-flex">
                    <ul class="pagination  mx-auto">
                      <li class="page-item">
                        <a class="page-link" href="#" aria-label="Previous">
                          <span aria-hidden="true">&laquo;</span>
                        </a>
                      </li>
                      <li class="page-item"><a class="page-link" href="#">1</a></li>
                      <li class="page-item"><a class="page-link" href="#">2</a></li>
                      <li class="page-item"><a class="page-link" href="#">3</a></li>
                      <li class="page-item">
                        <a class="page-link" href="#" aria-label="Next">
                          <span aria-hidden="true">&raquo;</span>
                        </a>
                      </li>
                    </ul>
                  </nav>
                </div>
              </div>
            </div>








          <div class="row mb-4">
            <div class="col-lg-12 mb-lg-0 mb-4">
              <div class="card z-index-2 h-100">
                <div class="card-header pb-0 pt-3 bg-transparent">
                  <h6 class="text-capitalize">Iron </h6>
                  <p class="text-sm mb-0">
                    <i class="fa fa-arrow-up text-success"></i>
                    <span class="font-weight-bold">4% more</span> in 2021
                  </p>
                </div>
                <div class="card-body p-3">
                  <div class="chart">
                    <canvas id="chart-line" class="chart-canvas" height="300"></canvas>
                  </div>
                </div>
              </div>
            </div>
            </div>
      </div>

      

    <!-- Optional JavaScript; choose one of the two! -->
    <script src="{% static 'js/core/popper.min.js' %}"></script>
    <script src="{% static 'js/core/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/plugins/perfect-scrollbar.min.js' %}"></script>
    <script src="{% static 'js/plugins/smooth-scrollbar.min.js' %}"></script>
    <script src="{% static 'js/plugins/chartjs.min.js' %}"></script>
  

    <script>
        var ctx1 = document.getElementById("chart-line").getContext("2d");
    
        var gradientStroke1 = ctx1.createLinearGradient(0, 230, 0, 50);
    
        gradientStroke1.addColorStop(1, 'rgba(94, 114, 228, 0.2)');
        gradientStroke1.addColorStop(0.2, 'rgba(94, 114, 228, 0.0)');
        gradientStroke1.addColorStop(0, 'rgba(94, 114, 228, 0)');
        new Chart(ctx1, {
          type: "line",
          data: {
            labels: ["Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
            datasets: [{
              label: "Mobile apps",
              tension: 0.4,
              borderWidth: 0,
              pointRadius: 0,
              borderColor: "#5e72e4",
              backgroundColor: gradientStroke1,
              borderWidth: 3,
              fill: true,
              data: [50, 40, 300, 220, 500, 250, 400, 230, 500],
              maxBarThickness: 6
    
            }],
          },
          options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
              legend: {
                display: false,
              }
            },
            interaction: {
              intersect: false,
              mode: 'index',
            },
            scales: {
              y: {
                grid: {
                  drawBorder: false,
                  display: true,
                  drawOnChartArea: true,
                  drawTicks: false,
                  borderDash: [5, 5]
                },
                ticks: {
                  display: true,
                  padding: 10,
                  color: '#fbfbfb',
                  font: {
                    size: 11,
                    family: "Open Sans",
                    style: 'normal',
                    lineHeight: 2
                  },
                }
              },
              x: {
                grid: {
                  drawBorder: false,
                  display: false,
                  drawOnChartArea: false,
                  drawTicks: false,
                  borderDash: [5, 5]
                },
                ticks: {
                  display: true,
                  color: '#ccc',
                  padding: 20,
                  font: {
                    size: 11,
                    family: "Open Sans",
                    style: 'normal',
                    lineHeight: 2
                  },
                }
              },
            },
          },
        });
      </script>

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->
    <script>

         function edit_row(id) {
             console.log('okk', id.toString(), document.getElementById('price' + id.toString()));
             var data = JSON.stringify({stock_price: document.getElementById('price' + id.toString()).value})
             console.log(data)
             var xhttp = new XMLHttpRequest();
             xhttp.open("POST", '/editprice/' + id.toString() + '/', true);
             xhttp.setRequestHeader('Content-Type', 'application/json');
             xhttp.setRequestHeader('X-CSRFToken', '{{csrf_token}}');

             xhttp.onreadystatechange = function () {
                 if (this.readyState == 4 && this.status == 200) {
                     alert('success')
                 }
             };


             xhttp.send(data);

            //  {#$('#eeditbtn').click(edit_row)}
         }

    </script>

    
  </body>
</html>


<aside
class="sidenav active-sidebar bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 "
id="sidenav-main" style="z-index: 10;" data-simplebar>
<div class="sidenav-header">
  <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none"
    aria-hidden="true" id="iconSidenav"></i>
  <!-- <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-xl-none" onclick="closeNav()" aria-hidden="true" id="iconSidenav"></i> -->
  <a class="navbar-brand m-0" href="{% url 'commodity' %}" target="_blank">
    <!-- <span class="ms-1 font-weight-bold">Commodity trading</span> -->
    <center>
      <img src="{% static 'img/acceron.png' %}" class="navbar-brand-img" width="180px" alt="main_logo"
        style="max-height: 3.5rem;">

    </center>
  </a>

</div>
<!-- <hr class="horizontal dark mt-0"> -->
<div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
  <ul class="navbar-nav nav nav-tabs" id="myTab" role="tablist">
    <li class="nav-item">
      <a class="nav-link " id="dashboard-tab" data-bs-toggle="tab" data-bs-target="#dashboard-tab-pane"
        type="button" role="tab" aria-controls="dashboard-tab-pane" aria-selected="true">
        <div
          class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
          <i class="ni ni-tv-2 text-primary text-sm opacity-10"></i>
        </div>
        <span class="nav-link-text ms-1">Dashboard</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " id="massupdate-tab" data-bs-toggle="tab" data-bs-target="#massupdate-tab-pane"
        type="button" role="tab" aria-controls="massupdate-tab-pane" aria-selected="false">
        <div
          class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
          <i class="ni ni-app text-sm opacity-10" style="color: #fb6340;"></i>
        </div>
        <span class="nav-link-text ms-1">Mass Update</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="ocr-tab" data-bs-toggle="tab" data-bs-target="#ocr-tab-pane" type="button" role="tab"
        aria-controls="ocr-tab-pane" aria-selected="false">
        <div
          class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
          <i class="ni ni-image text-sm opacity-10" style="color: #2dce89;"></i>
        </div>
        <span class="nav-link-text ms-1">Ocr</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" id="object-tab" data-bs-toggle="tab" data-bs-target="#object-tab-pane" type="button"
        role="tab" aria-controls="object-tab-pane" aria-selected="false">
        <div
          class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
          <i class="ni ni-ungroup text-sm opacity-10" style="color:#18a9e1;"></i>
          <!-- <i class="fa fa-object-group" aria-hidden="true"></i> -->

        </div>
        <span class="nav-link-text ms-1">Object Counting</span>
      </a>
    </li>

  </ul>
</div>

</aside>


<aside class="sidenav bg-white navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-4 ps ps--active-y" id="sidenav-main">
  <div class="sidenav-header">
  <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
  <a class="navbar-brand m-0" href=" https://demos.creative-tim.com/argon-dashboard/pages/dashboard.html " target="_blank">
    <img src="{% static 'img/acceron.png' %}" class="navbar-brand-img" width="180px" alt="main_logo"
    style="max-height: 3.5rem;">
  </a>
  </div>
  <hr class="horizontal dark mt-0">
  <div class="collapse navbar-collapse w-auto ps ps--active-y" id="sidenav-collapse-main">
    <ul class="navbar-nav nav nav-tabs" id="myTab" role="tablist">
      <li class="nav-item">
        <a class="nav-link active" href="{% url 'commodity' %}"
          type="button" role="tab" aria-controls="dashboard-tab-pane" aria-selected="true">
          <div
            class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-tv-2 text-primary text-sm opacity-10"></i>
          </div>
          <span class="nav-link-text ms-1">Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link " href="{% url 'massupdate' %}"
          type="button" role="tab" aria-controls="massupdate-tab-pane" aria-selected="false">
          <div
            class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-app text-sm opacity-10" style="color: #fb6340;"></i>
          </div>
          <span class="nav-link-text ms-1">Mass Update</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'ocr' %}" >
          <div
            class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-image text-sm opacity-10" style="color: #2dce89;"></i>
          </div>
          <span class="nav-link-text ms-1">Ocr</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="{% url 'objectcount' %}"
          role="tab" aria-controls="object-tab-pane" aria-selected="false">
          <div
            class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
            <i class="ni ni-ungroup text-sm opacity-10" style="color:#18a9e1;"></i>
            <!-- <i class="fa fa-object-group" aria-hidden="true"></i> -->
  
          </div>
          <span class="nav-link-text ms-1">Object Counting</span>
        </a>
      </li>
      <li class="nav-item">
          <a class="nav-link" href="{% url 'stock_screener' %}"
            role="tab" aria-controls="object-tab-pane" aria-selected="false">
            <div
              class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-ungroup text-sm opacity-10" style="color:#18a9e1;"></i>
              <!-- <i class="fa fa-object-group" aria-hidden="true"></i> -->
    
            </div>
            <span class="nav-link-text ms-1">Stock Screener</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{% url 'stock_predictions' %}"
            role="tab" aria-controls="object-tab-pane" aria-selected="false">
            <div
              class="icon icon-shape icon-sm border-radius-md text-center me-2 d-flex align-items-center justify-content-center">
              <i class="ni ni-ungroup text-sm opacity-10" style="color:#18a9e1;"></i>
              <!-- <i class="fa fa-object-group" aria-hidden="true"></i> -->
    
            </div>
            <span class="nav-link-text ms-1">Stock Predictions</span>
          </a>
        </li>
  
    </ul>
  <!-- <div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 0px; height: 0px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 0px;"></div></div></div>
  <div class="sidenav-footer mx-3 ">
  <div class="card card-plain shadow-none" id="sidenavCard">
  <img class="w-50 mx-auto" src="../assets/img/illustrations/icon-documentation.svg" alt="sidebar_illustration">
  <div class="card-body text-center p-3 w-100 pt-0">
  <div class="docs-info">
  <h6 class="mb-0">Need help?</h6>
  <p class="text-xs font-weight-bold mb-0">Please check our docs</p> -->
  </div>
  </div>
  </div>
  <!-- <a href="https://www.creative-tim.com/learning-lab/bootstrap/license/argon-dashboard" target="_blank" class="btn btn-dark btn-sm w-100 mb-3">Documentation</a>
  <a class="btn btn-primary btn-sm mb-0 w-100" href="https://www.creative-tim.com/product/argon-dashboard-pro?ref=sidebarfree" type="button">Upgrade to pro</a> -->
  </div>
  <!-- <div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 0px; height: 244px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 190px;"></div></div> -->
</aside>